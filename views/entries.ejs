<%- include('partials/header') %>
<%- include('partials/nav') %>

<main class="container py-5">
  <!-- Page heading + Add button -->
  <section class="mb-4">
    <div class="d-flex justify-content-between align-items-center">
      <h1 class="h3 mb-0">Pet Journal Entries</h1>
      <a href="/entries/addentry" class="btn btn-primary">
        Add New Entry
      </a>
    </div>
  </section>

    <!-- Entries Table -->
     <div class="row">
        <div class="table-responsive bg-white rounded-3 shadow-sm">
            <table class="table table-hover mb-0 align-middle">
                <!-- Header Row -->
                <tr class="d-flex">
                    <th class="text-center col-1">Name</th>
                    <th class="text-center col-1">Pet Type</th>
                    <th class="text-center col-1">Age</th>
                    <th class="text-center col-2">Entry Type</th>
                    <th class="text-center col-1">Date</th>
                    <th class="text-center col-1">Vet Name</th>
                    <th class="text-center col-1">Next Appointment</th>
                    <th class="text-center col-2">Notes</th>
                </tr>
                <!-- for/while loop -->
                 <% if (entries && entries.length > 0) { %>
                  <% for(let count=0; count < entries.length; count++) { %>
                    <tr class="d-flex">
                        <td class="text-center col-1"><%= entries[count].petName %></td>
                        <td class="text-center col-1"><%= entries[count].petType %></td>
                        <td class="text-center col-1"><%= entries[count].age %></td>
                        <td class="text-center col-2"><%= entries[count].entryType %></td>
                        <td class="text-center col-1"><%= entries[count].date %></td>
                        <td class="text-center col-1"><%= entries[count].vetName %></td>
                        <td class="text-center col-1"><%= entries[count].nextAppointment %></td>
                        <td class="text-center col-2"><%= entries[count].notes %></td>
                        <td class="text-center col-1">

                          <!-- Edit and Delete buttons --> 
                          <a href="/entries/edit/<%= entries[count]._id %>" 
                            class="btn btn-primary btn-sm">
                            <i class="fas fa-edit"></i> Edit </a></td>
                        <td class="text-center col-1">
                          <a href="/entries/delete/<%= entries[count]._id %>" 
                            class="btn btn-danger btn-sm ms-2"> <i class="fas fa-trash"></i> Delete </a></td>
                    </tr>
                  <% } %>
                  <% } else { %>
                    <tr>
                    <td colspan="10" class="text-center py-5">
                      <div class="text-muted">
                        <i class="fas fa-inbox fa-3x mb-3"></i>
                        <p class="lead">No entries yet</p>
                        <p>Click "Add New Entry" to create your first pet care record!</p>
                      </div>
                    </td>
                  </tr>
                  <% } %>

            </table>
        </div>
     </div>

</main>

<%- include('partials/footer') %>
